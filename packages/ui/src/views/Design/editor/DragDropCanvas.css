/* 画布容器 */
.drag-drop-canvas {
  @apply relative w-full h-full bg-white/50 rounded-lg overflow-auto;
  background-image: 
    linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
  background-size: 20px 20px;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* 组件包装器 */
.component-wrapper {
  @apply absolute cursor-move transition-all duration-300;
  user-select: none;
}

.component-wrapper::before {
  content: '';
  @apply absolute -inset-1 rounded border-2 border-transparent pointer-events-none transition-all duration-300;
}

.component-wrapper:hover::before {
  @apply border-blue-300/50;
}

.component-wrapper.selected::before {
  @apply border-blue-500;
  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
}

/* 组件内容 */
.component-content {
  @apply relative;
}

/* 组件调整手柄 */
.component-wrapper.selected::after {
  content: '';
  @apply absolute -right-2 -bottom-2 w-4 h-4 bg-white rounded-full border-2 border-blue-500 cursor-se-resize;
}

/* 组件工具栏 */
.component-toolbar {
  @apply absolute -top-8 left-1/2 transform -translate-x-1/2 flex gap-1 p-1 rounded-md opacity-0 transition-opacity duration-300;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.component-wrapper.selected .component-toolbar {
  @apply opacity-100;
}

/* 右键菜单 */
.context-menu {
  position: absolute;
  min-width: 160px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  z-index: 1000;
}

.context-menu :deep(.ant-dropdown-menu-item) {
  @apply transition-all duration-300;
}

.context-menu :deep(.ant-dropdown-menu-item:hover) {
  background: rgba(24, 144, 255, 0.1);
}

.context-menu :deep(.ant-dropdown-menu-item-divider) {
  background-color: rgba(0, 0, 0, 0.06);
}

/* 组件拖动时的效果 */
.component-wrapper:active {
  @apply cursor-grabbing opacity-90 scale-105;
  transition: all 0.1s ease-out;
}

/* 组件对齐线 */
.alignment-line {
  @apply absolute bg-blue-500/50 pointer-events-none;
  z-index: 1000;
}

.alignment-line.horizontal {
  @apply h-px w-full;
}

.alignment-line.vertical {
  @apply w-px h-full;
}

/* 组件缩放手柄 */
.resize-handle {
  @apply absolute w-2 h-2 bg-white border-2 border-blue-500 rounded-full opacity-0 transition-opacity duration-300;
}

.component-wrapper.selected .resize-handle {
  @apply opacity-100;
}

.resize-handle.top-left {
  @apply -top-1 -left-1 cursor-nw-resize;
}

.resize-handle.top-right {
  @apply -top-1 -right-1 cursor-ne-resize;
}

.resize-handle.bottom-left {
  @apply -bottom-1 -left-1 cursor-sw-resize;
}

.resize-handle.bottom-right {
  @apply -bottom-1 -right-1 cursor-se-resize;
}

/* 组件旋转手柄 */
.rotate-handle {
  @apply absolute -top-8 left-1/2 transform -translate-x-1/2 w-4 h-4 
    bg-white border-2 border-blue-500 rounded-full cursor-pointer opacity-0 transition-opacity duration-300;
}

.component-wrapper.selected .rotate-handle {
  @apply opacity-100;
}

/* 组件选中时的动画效果 */
@keyframes selectedPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(24, 144, 255, 0.4);
  }
  70% {
    box-shadow: 0 0 0 4px rgba(24, 144, 255, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(24, 144, 255, 0);
  }
}

.component-wrapper.selected {
  animation: selectedPulse 2s infinite;
}

/* 组件拖拽放置区域提示 */
.drop-indicator {
  @apply absolute inset-0 border-2 border-dashed border-blue-500/50 rounded-lg pointer-events-none opacity-0 transition-opacity duration-300;
}

.drag-drop-canvas.drag-over .drop-indicator {
  @apply opacity-100;
}

/* 组件工具按钮 */
.component-toolbar .ant-btn {
  @apply !p-1 !h-6 !w-6 flex items-center justify-center;
  background: transparent;
  border: none;
  color: rgba(0, 0, 0, 0.65);
}

.component-toolbar .ant-btn:hover {
  @apply bg-black/5;
  color: #1890ff;
}

/* 组件组合时的样式 */
.component-wrapper.grouped {
  @apply border border-dashed border-gray-400/50;
}

.component-wrapper.grouped::before {
  @apply border-gray-400/50;
}

/* 组件hover时的工具提示 */
.component-tooltip {
  @apply absolute -top-6 left-1/2 transform -translate-x-1/2 px-2 py-1 text-xs rounded
    bg-black/75 text-white opacity-0 transition-opacity duration-300 pointer-events-none;
}

.component-wrapper:hover .component-tooltip {
  @apply opacity-100;
}

/* 滚动条样式 */
.drag-drop-canvas::-webkit-scrollbar {
  @apply w-2 h-2;
}

.drag-drop-canvas::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.drag-drop-canvas::-webkit-scrollbar-thumb {
  @apply bg-black/10 rounded-full hover:bg-black/20 transition-colors duration-300;
}

/* 画布缩放控制 */
.canvas-controls {
  @apply absolute bottom-4 right-4 flex items-center gap-2 p-2 rounded-lg;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.canvas-controls .ant-btn {
  @apply !p-1 !h-6 !w-6 flex items-center justify-center;
  background: transparent;
  border: none;
  color: rgba(0, 0, 0, 0.65);
}

.canvas-controls .ant-btn:hover {
  @apply bg-black/5;
  color: #1890ff;
}
